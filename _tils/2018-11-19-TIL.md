---
layout: post
title: 2018-11-19 TIL
description: "TIL"
tags: [TIL, 강의노트]
---

## 방통대 강의노트 (자료구조, 데이터베이스 설계 및 구현)

### 자료구조(멀티웨이 탐색트리)

#### m원 탐색트리(m-way)

> 트리의 노드가 m개 이하의 가지를 가질 수 있는 탐색트리

- 이진 탐색트리의 확장된 형태
- 탐색트리의 제한을 따르되 2개이상 m개 이하의 자식을 가질 수 있음
- 잎노드는 키값으로만 표기하고 내부노드 중 자식이 없는 포인터들은 표시하지 않음
- 일반적으로 노드의 가지개수가 많을수록 (서브트리가 많을수록) 최대 탐색길이는 짧아짐

#### B트리

> m원 탐색트리를 개선한 B트리는 인덱스 구조를 구현하는데 가장 일반적으로 사용함

- m원 탐색트리는 균형에 대해서는 특별히 제한하지 않음
  - 각 노드가 자식을 더욱 많이 갖게하여 높이를 줄이고 균형을 유지하면 탐색성능을 더욱 향상시킬 수 있음
- 조건
  - 루트와 잎 노드를 제외한 트리의 각 노드는 최소 m/2 개의 서브트리를 갖는다
  - 트리의 루트는 최소한 2개의 서브트리를 갖는다
  - 트리의 모든 잎노드는 같은 레벨에 있다.

#### B\*트리

> 노드의 2/3이상이 채워지는 B트리

- 노드가 꽉차면 분리하지 않고, 키와 포인터를 재배치하여 다른 형제노드로 옮김
- 삽입/삭제시 발생하는 노드분리를 줄이려고 고안
- 탐색트리로 구성하면 매우 빠르게 탐색할 수 있지만 전체데이터를 차례로 처리하기는 불편함

- 조건
  - 공집합이거나 높이가 1이상인 m원 탐색트리이다
  - 포인터가 k개인 잎이아닌 노드는 k-1개의 키를 갖는다(루트노드 포함)

### 데이터베이스 설계 및 구현(저장 프로그램)

#### 저장 프로그램

> SQL의 비절차적인 부분을 극복하기 위해 선택,반복문 등의 제어문의 기능을 추가하고 프로그램의 형태로 DBMS내부에 하나의 데이터베이스 객체로 저장되어 관리

- 장점
  - 네트워크 전송효율향상
  - 실행속도 효율성 향상
  - 모듈화 기능
  - 보안향상
- 단점
  - 낮은 처리성능
  - 디버깅 기능 제한
- 변수선언
  - 사용자 정의변수
    - 저장프로그램 외부에서 사용
    - 이름이 @로 시작함, 데이터타입 미지정
    - 결과를 받기위한 변수지정에 주로 사용
  - 로컬변수
    - 저장프로그램 내부에서 사용
    - `DECLARE 변수명[,...] 데이터타입[(크기)] [DEFAULT 기본값]`
- 할당
  - 변수에 값을 할당하기 위해서 `SET` 또는 `SELECT INTO` 사용

#### 저장 프로시저

> 여러가지 응용작업 중 자주 사용되거나 복잡한 과정을 거치는 SQL문을 저장하여 하나의 객체로 관리하는 기능

- 함수와 달리 이름을 이용하여 값을 반환하지 않음
- 매개변수를 받아들이거나 반환
- 프로시저 내에서 또 다른 프로시저 호출
- 실행과 관련된 결과값과 메시지를 반환

```sql
// 명령문의 종료 혼동방지를 위함
DELIMITER $$

CREATE
 [DEFINER = {사용자|현재사용자}]
 PROCEDURE 프로시저 이름
  ([매개변수[,...])
 BEGIN
  SQL문;
 END$$

DELIMITER ;
```

- 호출
  - `CALL 프로시저 이름[(매개변수,[...])]`
- 관리
  - 수정은 `ALTER PROCEDURE`
  - 보안 및 동작방식에 대한 속성을 변경할 때만 사용
  - 정의 수정은 `DROP` 후 재생성하여 사용
- 매개변수
  - `IN`: 호출시 필요한 값을 프로시저에 전달
  - `OUT`: 저장 프로시저에서 실행한 값을 호출한 곳으로 전달
  - `INOUT`: 모두 수행

#### 절차의 표현

- 선택문
  - `IF-ELSEIF-ELSE`, `CASE`
- 반복문
  - `WHILE`, `REPEAT`(UNTIL 조건이 거짓일 동안 반복), `LOOP`
  - `LEAVE`(브레이크), `ITERATE`(컨티뉴)

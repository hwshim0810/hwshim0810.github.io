---
layout: post
title: 2018-11-28 TIL
description: "TIL"
tags: [TIL, 강의노트]
---

## 방통대 강의노트 (자료구조, 데이터베이스 설계 및 구현)

### 자료구조(그래프)

#### 그래프의 탐색

> 그래프에서 특정 정점을 찾는 기본연산

- 깊이우선탐색

  - 출발점 V를 방문
  - 다음으로 V에 인접하고 아직 방문하지 않은 정점 W를 선택하여 W를 출발점으로 다시 깊이 우선 탐색을 진행
  - 위의 과정을 모든 정점을 한번씩 방문할 때까지 반복
  - 만약 인접한 모든 정점들이 이미 방문한 정점인 경우는 가장 최근에 방문했던 정점중에서, 방문하지 않은 정점 W를 가진 정점을 선택하여 정점 W로 부터 다시 깊이 우선탐색을 시작함
  - 미 방문 정점이 없으면 탐색을 종료함

- 너비우선탐색
  - 출발점 V를 방문
  - 다음으로 V에 인접한 정점 W를 모두 방문한 후, 다시 W에 인접한 방문하지 않은 정점들을 차례로 방문함
  - 위의 과정을 모든 정점을 한번씩 방문할 때까지 반복
  - 인접정점을 모두 방문하기 때문에 스택이 아닌 큐를 사용

#### 최소신장트리

- 트리: 사이클이 없는 단순그래프
  - 트리는 그래프이긴 하지만 루트를 가지기 떄문에 계층 개념이 있고 사이클이 없어서 한 정점에서 다른정점으로 가는 경로가 유일한 구조
- 신장트리

  - 그래프 G의 _모든 정점과_ 간선의 일부(또는 전부)를 포함하는 트리
  - 주어진 그래프의 정점을 모두 포함함
  - 최소 n-1 개의 간선으로 구성한 그래프

- 프림 알고리즘

  > n개의 정점을 갖는 연결그래프에 대한 최소비용신장트리를 구하는 알고리즘

  - 그래프 전체에서 최소 비용을 갖는 간선을 선택하여 이 간선을 최소비용신장트리에 추가
  - 이 간선을 최소비용 신장트리에 추가하였을 때, 사이클을 형성하지 않으면 추가 아니면 무시

* 크루스컬 알고리즘

  - 남은 간선중에서 무조건 최소비용인 간선을 선택한 후 사이클을 형셩하지 않으면 그 간선을 선택
  - 중간과정의 트리는 하나의 트리가 아닌 여러개의 분리된 트리, 즉 숲일 수 있음

* 솔린 알고리즘
  - 간선이 하나도 없는 그래프의 모든 정점들로 구성된 숲에서 시작함
    - 단계가 거듭되면서 숲 내의 트리들이 최소비용을 갖는 간선으로 연결

### 데이터베이스 설계 및 구현 (함수, 커서, 트리거)

#### 함수

- 기본적으로 제공해주는 함수 이외의 함수를 사용자 정의함수 기능으로 생성가능
- 저장 프로시저와 유사
- RETURN문에 의해 특정값 반환
- 저장 프로시저는 CALL 명령에 의해 호출되지만 함수는 SELECT문에 포함가능

```sql
CREATE
 [DEFINER = {사용자|현재사용자}]
 FUNCTION 함수명([매개변수, ...])
   RETURNS 데이터 타입
BEGIN
  SQL 문
END
```

#### 커서

> 테이블에서 SELECT문을 사용하여 여러 레코드를 질의한 후, 질의결과 집합에서 한 레코드씩 처리하기 위한 방식

- 전방향으로 읽기만 가능, 돌아가기 불가능
- 레코드 삭제/수정불가
- 프로시저, 함수, 트리거에서 사용가능
- 커서의 선언은 변수선언 다음
- 커서선언(DECLARE) -> 커서열기(OPEN) -> 커서에서 데이터 가져오기(FETCH) -> 커서닫기(CLOSE)
- 커서선언
  - `DECLARE 커서명 CURSOR FOR SELECT ...`
- 커서열기
  - `OPEN 커서명`
- 가져오기
  - `FETCH 커서명 INTO 변수명, ...`
  - 더 이상 레코드가 없는 경우 오류이벤트 발생
    - CONTINUE로 처리
    - `DECLARE CONTINUE HANDLER FOR NOT FOUND SQL ...`
- 닫기
  - `CLOSE 커서명`

#### 트리거

> 테이블에 조작이 이뤄질때, 반응하도록 설계된 저장 프로그램

- 삽입, 수정, 삭제 전후

```sql
CREATE TRIGGER 트리거이름
 트리거시점 트리거이벤트
 ON 테이블
 FOR EACH ROW

BEGIN
 SQL 문...
END
```
